<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.3.2 (Python 3.14.0 on win32)" generated="2025-11-01T23:14:09.258530" rpa="false" schemaversion="5">
<suite id="s1" name="MID Integrity" source="C:\Users\enzob\stone-qa-robot-project\Tests\MID_Integrity.robot">
<test id="s1-t1" name="Cenario_MID_Inconsistente_Deve_Ser_Rejeitado_Na_Captura" line="18">
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2025-11-01T23:14:09.351473" level="INFO">Creating Session using : alias=payments_api, url=http://localhost:3001, headers={},                     cookies={}, auth=None, timeout=None, proxies=None, verify=False,                     debug=0 </msg>
<arg>payments_api</arg>
<arg>${BASE_URL}</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2025-11-01T23:14:09.351333" elapsed="0.000272"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>-- PASSO 1: Autorizando com ${MID_CORRETO} --</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-01T23:14:09.351760" elapsed="0.000167"/>
</kw>
<kw name="Fazer Autorizacao">
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2025-11-01T23:14:09.352662" level="INFO">&amp;{body} = { merchant_id=MID_A | amount=100.00 }</msg>
<var>&amp;{body}</var>
<arg>merchant_id=${mid}</arg>
<arg>amount=${valor}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2025-11-01T23:14:09.352392" elapsed="0.000291"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2025-11-01T23:14:09.361560" level="INFO">POST Request : url=http://localhost:3001/api/authorize 
 path_url=/api/authorize 
 headers={'User-Agent': 'python-requests/2.32.5', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '44', 'Content-Type': 'application/json'} 
 body=b'{"merchant_id": "MID_A", "amount": "100.00"}' 
 </msg>
<msg time="2025-11-01T23:14:09.361646" level="INFO">POST Response : url=http://localhost:3001/api/authorize 
 status=200, reason=OK 
 headers={'Content-Type': 'application/json; charset=utf-8', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,HEAD,OPTIONS', 'Access-Control-Allow-Headers': 'Content-Type, Origin, Accept, Authorization, Content-Length, X-Requested-With', 'Content-Length': '115', 'Date': 'Sun, 02 Nov 2025 02:14:09 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={
  "status": "APPROVED",
  "auth_code": "XYZ123",
  "transaction_id": "c87ae917-3472-44df-81b0-141ce482d432"
} 
 </msg>
<msg time="2025-11-01T23:14:09.361741" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>payments_api</arg>
<arg>/api/authorize</arg>
<arg>json=${body}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2025-11-01T23:14:09.352757" elapsed="0.009007"/>
</kw>
<kw name="Status Should Be" owner="RequestsLibrary">
<arg>200</arg>
<arg>${response}</arg>
<doc>Fails if response status code is different than the expected.</doc>
<status status="PASS" start="2025-11-01T23:14:09.361856" elapsed="0.000356"/>
</kw>
<return>
<value>${response}</value>
<status status="PASS" start="2025-11-01T23:14:09.362262" elapsed="0.000040"/>
</return>
<msg time="2025-11-01T23:14:09.362405" level="INFO">${AUTH_RESPONSE} = &lt;Response [200]&gt;</msg>
<var>${AUTH_RESPONSE}</var>
<arg>${MID_CORRETO}</arg>
<arg>${VALOR_TRANSACAO}</arg>
<status status="PASS" start="2025-11-01T23:14:09.352135" elapsed="0.010287"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2025-11-01T23:14:09.362869" level="INFO">${AUTH_CODE} = XYZ123</msg>
<var>${AUTH_CODE}</var>
<arg>${AUTH_RESPONSE.json()}</arg>
<arg>auth_code</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2025-11-01T23:14:09.362538" elapsed="0.000349"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2025-11-01T23:14:09.363076" level="INFO">Length is 6.</msg>
<arg>${AUTH_CODE}</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2025-11-01T23:14:09.362991" elapsed="0.000118"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>-- PASSO 2: Atacando com MID Invalido (${MID_ERRADO}) --</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-01T23:14:09.363205" elapsed="0.000137"/>
</kw>
<kw name="Tentar Captura com MID Invalido">
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2025-11-01T23:14:09.364086" level="INFO">&amp;{body} = { auth_code=XYZ123 | merchant_id=MID_B | amount=100.00 }</msg>
<var>&amp;{body}</var>
<arg>auth_code=${auth_code}</arg>
<arg>merchant_id=${mid}</arg>
<arg>amount=${valor}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2025-11-01T23:14:09.363840" elapsed="0.000269"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2025-11-01T23:14:09.367743" level="INFO">POST Request : url=http://localhost:3001/api/capture 
 path_url=/api/capture 
 headers={'User-Agent': 'python-requests/2.32.5', 'Accept-Encoding': 'gzip, deflate, zstd', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '67', 'Content-Type': 'application/json'} 
 body=b'{"auth_code": "XYZ123", "merchant_id": "MID_B", "amount": "100.00"}' 
 </msg>
<msg time="2025-11-01T23:14:09.367794" level="INFO">POST Response : url=http://localhost:3001/api/capture 
 status=403, reason=Forbidden 
 headers={'Content-Type': 'application/json; charset=utf-8', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,HEAD,OPTIONS', 'Access-Control-Allow-Headers': 'Content-Type, Origin, Accept, Authorization, Content-Length, X-Requested-With', 'Content-Length': '106', 'Date': 'Sun, 02 Nov 2025 02:14:09 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={
  "error_code": "MID_MISMATCH",
  "message": "Capture failed: MID is inconsistent with authorization."
} 
 </msg>
<msg time="2025-11-01T23:14:09.367877" level="INFO">${response} = &lt;Response [403]&gt;</msg>
<var>${response}</var>
<arg>payments_api</arg>
<arg>/api/capture</arg>
<arg>json=${body}</arg>
<arg>expected_status=any</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2025-11-01T23:14:09.364191" elapsed="0.003712"/>
</kw>
<return>
<value>${response}</value>
<status status="PASS" start="2025-11-01T23:14:09.367954" elapsed="0.000034"/>
</return>
<msg time="2025-11-01T23:14:09.368099" level="INFO">${CAPTURE_RESPONSE} = &lt;Response [403]&gt;</msg>
<var>${CAPTURE_RESPONSE}</var>
<arg>${AUTH_CODE}</arg>
<arg>${MID_ERRADO}</arg>
<arg>${VALOR_TRANSACAO}</arg>
<status status="PASS" start="2025-11-01T23:14:09.363548" elapsed="0.004573"/>
</kw>
<kw name="Should Be Equal As Strings" owner="BuiltIn">
<msg time="2025-11-01T23:14:09.368544" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${CAPTURE_RESPONSE.status_code}</arg>
<arg>403</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" start="2025-11-01T23:14:09.368256" elapsed="0.000325"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2025-11-01T23:14:09.368975" level="INFO">${ERROR_CODE} = MID_MISMATCH</msg>
<var>${ERROR_CODE}</var>
<arg>${CAPTURE_RESPONSE.json()}</arg>
<arg>error_code</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2025-11-01T23:14:09.368691" elapsed="0.000304"/>
</kw>
<kw name="Should Be Equal As Strings" owner="BuiltIn">
<arg>${ERROR_CODE}</arg>
<arg>MID_MISMATCH</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" start="2025-11-01T23:14:09.369149" elapsed="0.000098"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>SUCESSO: O sistema protegeu a integridade (MID Mismatch).</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-01T23:14:09.369342" elapsed="0.000107"/>
</kw>
<doc>Testa o Quality Gate da Regra 1: A Captura deve falhar (403) se o MID for diferente da Autorizacao.</doc>
<status status="PASS" start="2025-11-01T23:14:09.350540" elapsed="0.019042"/>
</test>
<status status="PASS" start="2025-11-01T23:14:09.259604" elapsed="0.110333"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat name="MID Integrity" id="s1" pass="1" fail="0" skip="0">MID Integrity</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
