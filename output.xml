<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.3.2 (Python 3.14.0 on win32)" generated="2025-11-07T01:50:54.458985" rpa="false" schemaversion="5">
<suite id="s1" name="MID Integrity" source="C:\Users\enzob\qa-project-mid-valid\Tests\MID_Integrity.robot">
<test id="s1-t1" name="Cenario_MID_Inconsistente_Deve_Ser_Rejeitado_Na_Captura" line="18">
<kw name="Create Session" owner="RequestsLibrary">
<msg time="2025-11-07T01:50:54.762025" level="INFO">Creating Session using : alias=payments_api, url=http://localhost:3001, headers={},                     cookies={}, auth=None, timeout=None, proxies=None, verify=False,                     debug=0 </msg>
<arg>payments_api</arg>
<arg>${BASE_URL}</arg>
<doc>Create Session: create a HTTP session to a server</doc>
<status status="PASS" start="2025-11-07T01:50:54.761883" elapsed="0.000284"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>-- PASSO 1: Autorizando com ${MID_CORRETO} --</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-07T01:50:54.762316" elapsed="0.000176"/>
</kw>
<kw name="Fazer Autorizacao">
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2025-11-07T01:50:54.763217" level="INFO">&amp;{body} = { merchant_id=MID_A | amount=100.00 }</msg>
<var>&amp;{body}</var>
<arg>merchant_id=${mid}</arg>
<arg>amount=${valor}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2025-11-07T01:50:54.762952" elapsed="0.000286"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2025-11-07T01:50:54.773884" level="INFO">POST Request : url=http://localhost:3001/api/authorize 
 path_url=/api/authorize 
 headers={'User-Agent': 'python-requests/2.32.4', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '44', 'Content-Type': 'application/json'} 
 body=b'{"merchant_id": "MID_A", "amount": "100.00"}' 
 </msg>
<msg time="2025-11-07T01:50:54.773967" level="INFO">POST Response : url=http://localhost:3001/api/authorize 
 status=200, reason=OK 
 headers={'Content-Type': 'application/json; charset=utf-8', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,HEAD,OPTIONS', 'Access-Control-Allow-Headers': 'Content-Type, Origin, Accept, Authorization, Content-Length, X-Requested-With', 'Content-Length': '109', 'Date': 'Fri, 07 Nov 2025 04:50:54 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={ 
  "status": "APPROVED", "auth_code": "XYZ123", "transaction_id": "d0b59d12-bf29-40dd-bd91-d6852143ccd7" 
} 
 </msg>
<msg time="2025-11-07T01:50:54.774052" level="INFO">${response} = &lt;Response [200]&gt;</msg>
<var>${response}</var>
<arg>payments_api</arg>
<arg>/api/authorize</arg>
<arg>json=${body}</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2025-11-07T01:50:54.763301" elapsed="0.010771"/>
</kw>
<kw name="Status Should Be" owner="RequestsLibrary">
<arg>200</arg>
<arg>${response}</arg>
<doc>Fails if response status code is different than the expected.</doc>
<status status="PASS" start="2025-11-07T01:50:54.774156" elapsed="0.000147"/>
</kw>
<return>
<value>${response}</value>
<status status="PASS" start="2025-11-07T01:50:54.774344" elapsed="0.000035"/>
</return>
<msg time="2025-11-07T01:50:54.774477" level="INFO">${AUTH_RESPONSE} = &lt;Response [200]&gt;</msg>
<var>${AUTH_RESPONSE}</var>
<arg>${MID_CORRETO}</arg>
<arg>${VALOR_TRANSACAO}</arg>
<status status="PASS" start="2025-11-07T01:50:54.762704" elapsed="0.011791"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2025-11-07T01:50:54.774959" level="INFO">${AUTH_CODE} = XYZ123</msg>
<var>${AUTH_CODE}</var>
<arg>${AUTH_RESPONSE.json()}</arg>
<arg>auth_code</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2025-11-07T01:50:54.774624" elapsed="0.000353"/>
</kw>
<kw name="Should Not Be Empty" owner="BuiltIn">
<msg time="2025-11-07T01:50:54.775177" level="INFO">Length is 6.</msg>
<arg>${AUTH_CODE}</arg>
<doc>Verifies that the given item is not empty.</doc>
<status status="PASS" start="2025-11-07T01:50:54.775082" elapsed="0.000123"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>-- PASSO 2: Atacando com MID Invalido (${MID_ERRADO}) --</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-07T01:50:54.775300" elapsed="0.000144"/>
</kw>
<kw name="Tentar Captura com MID Invalido">
<kw name="Create Dictionary" owner="BuiltIn">
<msg time="2025-11-07T01:50:54.776048" level="INFO">&amp;{body} = { auth_code=XYZ123 | merchant_id=MID_B | amount=100.00 }</msg>
<var>&amp;{body}</var>
<arg>auth_code=${auth_code}</arg>
<arg>merchant_id=${mid}</arg>
<arg>amount=${valor}</arg>
<doc>Creates and returns a dictionary based on the given ``items``.</doc>
<status status="PASS" start="2025-11-07T01:50:54.775840" elapsed="0.000227"/>
</kw>
<kw name="POST On Session" owner="RequestsLibrary">
<msg time="2025-11-07T01:50:54.781992" level="INFO">POST Request : url=http://localhost:3001/api/capture 
 path_url=/api/capture 
 headers={'User-Agent': 'python-requests/2.32.4', 'Accept-Encoding': 'gzip, deflate, br, zstd', 'Accept': '*/*', 'Connection': 'keep-alive', 'Content-Length': '67', 'Content-Type': 'application/json'} 
 body=b'{"auth_code": "XYZ123", "merchant_id": "MID_B", "amount": "100.00"}' 
 </msg>
<msg time="2025-11-07T01:50:54.782035" level="INFO">POST Response : url=http://localhost:3001/api/capture 
 status=403, reason=Forbidden 
 headers={'Content-Type': 'application/json; charset=utf-8', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'GET,POST,PUT,PATCH,DELETE,HEAD,OPTIONS', 'Access-Control-Allow-Headers': 'Content-Type, Origin, Accept, Authorization, Content-Length, X-Requested-With', 'Content-Length': '67', 'Date': 'Fri, 07 Nov 2025 04:50:54 GMT', 'Connection': 'keep-alive', 'Keep-Alive': 'timeout=5'} 
 body={ 
  "error_code": "MID_MISMATCH", "message": "Capture failed..."
} 
 </msg>
<msg time="2025-11-07T01:50:54.782097" level="INFO">${response} = &lt;Response [403]&gt;</msg>
<var>${response}</var>
<arg>payments_api</arg>
<arg>/api/capture</arg>
<arg>json=${body}</arg>
<arg>expected_status=any</arg>
<doc>Sends a POST request on a previously created HTTP Session.</doc>
<status status="PASS" start="2025-11-07T01:50:54.776134" elapsed="0.005981"/>
</kw>
<return>
<value>${response}</value>
<status status="PASS" start="2025-11-07T01:50:54.782161" elapsed="0.000030"/>
</return>
<msg time="2025-11-07T01:50:54.782286" level="INFO">${CAPTURE_RESPONSE} = &lt;Response [403]&gt;</msg>
<var>${CAPTURE_RESPONSE}</var>
<arg>${AUTH_CODE}</arg>
<arg>${MID_ERRADO}</arg>
<arg>${VALOR_TRANSACAO}</arg>
<status status="PASS" start="2025-11-07T01:50:54.775611" elapsed="0.006692"/>
</kw>
<kw name="Should Be Equal As Strings" owner="BuiltIn">
<msg time="2025-11-07T01:50:54.782690" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${CAPTURE_RESPONSE.status_code}</arg>
<arg>403</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" start="2025-11-07T01:50:54.782421" elapsed="0.000305"/>
</kw>
<kw name="Get From Dictionary" owner="Collections">
<msg time="2025-11-07T01:50:54.783118" level="INFO">${ERROR_CODE} = MID_MISMATCH</msg>
<var>${ERROR_CODE}</var>
<arg>${CAPTURE_RESPONSE.json()}</arg>
<arg>error_code</arg>
<doc>Returns a value from the given ``dictionary`` based on the given ``key``.</doc>
<status status="PASS" start="2025-11-07T01:50:54.782830" elapsed="0.000306"/>
</kw>
<kw name="Should Be Equal As Strings" owner="BuiltIn">
<arg>${ERROR_CODE}</arg>
<arg>MID_MISMATCH</arg>
<doc>Fails if objects are unequal after converting them to strings.</doc>
<status status="PASS" start="2025-11-07T01:50:54.783295" elapsed="0.000100"/>
</kw>
<kw name="Log To Console" owner="BuiltIn">
<arg>SUCESSO: O sistema protegeu a integridade (MID Mismatch).</arg>
<doc>Logs the given message to the console.</doc>
<status status="PASS" start="2025-11-07T01:50:54.783490" elapsed="0.000113"/>
</kw>
<doc>Testa o Quality Gate da Regra: A Captura deve falhar (403) se o MID for diferente da Autorizacao.</doc>
<status status="PASS" start="2025-11-07T01:50:54.761150" elapsed="0.022603"/>
</test>
<status status="PASS" start="2025-11-07T01:50:54.460041" elapsed="0.324137"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat name="MID Integrity" id="s1" pass="1" fail="0" skip="0">MID Integrity</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
